(()=>{"use strict";var e={d:(t,n)=>{for(var r in n)e.o(n,r)&&!e.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:n[r]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{a:()=>_});const t=()=>{},n={},r={},o=[200],i={};function a({method:e="GET",url:a,params:s=r,headers:c=n,body:l=i,responseType:d="json",requestType:h="json",okResponces:g=o,onSuccess:u=t,onError:v=t}){const w=new XMLHttpRequest,p=new URLSearchParams(s).toString();w.open(e,a+(p?`?${p}`:"")),Object.keys(c).forEach((e=>{w.setRequestHeader(e,c[e])})),w.responseType=d,w.onload=function(e){const t=e.target;g.includes(t.status)?u(t.response):v("Город не найден")},w.onerror=()=>{v("Нет Интернета")};let m=l;"urlencoded"===h&&(w.setRequestHeader("Content-type","application/x-www-form-urlencoded"),m=new URLSearchParams(l).toString()),"json"===h&&m!==i&&(w.setRequestHeader("Content-type","application/json"),m=JSON.stringify(l)),w.send(m)}function s(e){if(null==e||!1===e)return document.createTextNode("");if("string"==typeof e||"number"==typeof e||!0===typeof e)return document.createTextNode(e);if(Array.isArray(e)){const t=document.createDocumentFragment();return e.forEach((e=>{const n=s(e);t.appendChild(n)})),t}const t=document.createElement(e.tag);e.cls&&t.classList.add(...[].concat(e.cls).filter(Boolean)),e.attrs&&Object.keys(e.attrs).forEach((n=>{"src"===n&&_?t.setAttribute(n,e.attrs[n]+"-night.svg"):t.setAttribute(n,e.attrs[n]+".svg")}));const n=s(e.content);return t.appendChild(n),t}const c={AU:"Австралия",AT:"Австрия",AZ:"Азербайджан",AX:"Аландские острова",AL:"Албания",DZ:"Алжир",VI:"Виргинские Острова (США)",AS:"Американское Самоа",AI:"Ангилья",AO:"Ангола",AD:"Андорра",AQ:"Антарктида",AG:"Антигуа и Барбуда",AR:"Аргентина",AM:"Армения",AW:"Аруба",AF:"Афганистан",BS:"Багамские Острова",BD:"Бангладеш",BB:"Барбадос",BH:"Бахрейн",BZ:"Белиз",BY:"Белоруссия",BE:"Бельгия",BJ:"Бенин",BM:"Бермуды",BG:"Болгария",BO:"Боливия",BQ:"Бонэйр, Синт-Эстатиус и Саба",BA:"Босния и Герцеговина",BW:"Ботсвана",BR:"Бразилия",IO:"Британская территория в Индийском океане",VG:"Виргинские Острова (Великобритания)",BN:"Бруней",BF:"Буркина-Фасо",BI:"Бурунди",BT:"Бутан",VU:"Вануату",VA:"Ватикан",GB:"Великобритания",HU:"Венгрия",VE:"Венесуэла",UM:"Внешние малые острова (США)",TL:"Восточный Тимор",VN:"Вьетнам",GA:"Габон",HT:"Гаити",GY:"Гайана",GM:"Гамбия",GH:"Гана",GP:"Гваделупа",GT:"Гватемала",GF:"Гвиана",GN:"Гвинея",GW:"Гвинея-Бисау",DE:"Германия",GG:"Гернси",GI:"Гибралтар",HN:"Гондурас",HK:"Гонконг",GD:"Гренада",GL:"Гренландия",GR:"Греция",GE:"Грузия",GU:"Гуам",DK:"Дания",JE:"Джерси",DJ:"Джибути",DM:"Доминика",DO:"Доминиканская Республика",CD:"ДР Конго",Европейский:"Флаг ЕС",EG:"Египет",ZM:"Замбия",EH:"САДР",ZW:"Зимбабве",IL:"Израиль",IN:"Индия Индия",ID:"Индонезия",JO:"Иордания",IQ:"Ирак",IR:"Иран",IE:"Ирландия",IS:"Исландия",ES:"Испания",IT:"Италия",YE:"Йемен",CV:"Кабо-Верде",KZ:"Казахстан",KY:"Острова Кайман",KH:"Камбоджа",CM:"Камерун",CA:"Канада",QA:"Катар",KE:"Кения",CY:"Кипр",KG:"Киргизия",KI:"Кирибати",TW:"Китайская Республика",KP:"КНДР",CN:"Китай",CC:"Кокосовые острова",CO:"Колумбия",KM:"Коморы",CR:"Коста-Рика",CI:"Кот-д’Ивуар",CU:"Куба",KW:"Кувейт",CW:"Кюрасао",LA:"Лаос",LV:"Латвия",LS:"Лесото",LR:"Либерия",LB:"Ливан",LY:"Ливия",LT:"Литва",LI:"Лихтенштейн",LU:"Люксембург",MU:"Маврикий",MR:"Мавритания",MG:"Мадагаскар",YT:"Майотта",MO:"Макао",MK:"Северная Македония",MW:"Малави",MY:"Малайзия",ML:"Мали",MV:"Мальдивы",MT:"Мальта",MA:"Марокко",MQ:"Мартиника",MH:"Маршалловы Острова",MX:"Мексика",FM:"Микронезия",MZ:"Мозамбик",MD:"Молдавия",MC:"Монако",MN:"Монголия",MS:"Монтсеррат",MM:"Мьянма",NA:"Намибия",NR:"Науру",NP:"Непал",NE:"Нигер",NG:"Нигерия",NL:"Нидерланды",NI:"Никарагуа",NU:"Ниуэ",NZ:"Новая Зеландия",NC:"Новая Каледония",NO:"Норвегия",AE:"ОАЭ",OM:"Оман",BV:"Остров Буве",IM:"Остров Мэн",CK:"Острова Кука",NF:"Остров Норфолк",CX:"Остров Рождества",PN:"Острова Питкэрн",SH:"Острова Святой Елены, Вознесения и Тристан-да-Кунья",PK:"Пакистан",PW:"Палау",PS:"Государство Палестина",PA:"Панама",PG:"Папуа — Новая Гвинея",PY:"Парагвай",PE:"Перу",PL:"Польша",PT:"Португалия",PR:"Пуэрто-Рико",CG:"Республика Конго",KR:"Республика Корея",RE:"Реюньон",RU:"Россия",RW:"Руанда",RO:"Румыния",SV:"Сальвадор",WS:"Самоа",SM:"Сан-Марино",ST:"Сан-Томе и Принсипи",SA:"Саудовская Аравия",SZ:"Эсватини",MP:"Северные Марианские Острова",SC:"Сейшельские Острова",BL:"Сен-Бартелеми",MF:"Сен-Мартен",PM:"Сен-Пьер и Микелон",SN:"Сенегал",VC:"Сент-Винсент и Гренадины",KN:"Сент-Китс и Невис",LC:"Сент-Люсия",RS:"Сербия",SG:"Сингапур",SX:"Синт-Мартен",SY:"Сирия",SK:"Словакия",SI:"Словения",SB:"Соломоновы Острова",SO:"Сомали",SD:"Судан",SR:"Суринам",US:"США",SL:"Сьерра-Леоне",TJ:"Таджикистан",TH:"Таиланд",TZ:"Танзания",TC:"Теркс и Кайкос",TG:"Того",TK:"Токелау",TO:"Тонга",TT:"Тринидад и Тобаго",TV:"Тувалу",TN:"Тунис",TM:"Туркмения",TR:"Турция",UG:"Уганда",UZ:"Узбекистан",UA:"Украина",WF:"Уоллис и Футуна",UY:"Уругвай",FO:"Фареры",FJ:"Фиджи",PH:"Филиппины",FI:"Финляндия",FK:"Фолклендские острова",FR:"Франция",PF:"Французская Полинезия",TF:"Французские Южные и Антарктические Территории",HM:"Херд и Макдональд",HR:"Хорватия",CF:"ЦАР",TD:"Чад",ME:"Черногория",CZ:"Чехия",CL:"Чили",CH:"Швейцария",SE:"Швеция",SJ:"Флаг Шпицбергена и Ян-Майена Шпицберген и Ян-Майен",LK:"Шри-Ланка",EC:"Эквадор",GQ:"Экваториальная Гвинея",ER:"Эритрея",EE:"Эстония",ET:"Эфиопия",ZA:"ЮАР",GS:"Южная Георгия и Южные Сандвичевы Острова",SS:"Южный Судан",JM:"Ямайка",JP:"Япония"},l={200:"weather-icon-svg/thunderstorms-rain",201:"weather-icon-svg/thunderstorms-rain",202:"weather-icon-svg/thunderstorms-rain",210:"weather-icon-svg/thunderstorms",211:"weather-icon-svg/thunderstorms",212:"weather-icon-svg/thunderstorms",221:"weather-icon-svg/thunderstorms",230:"weather-icon-svg/thunderstorms-rain",231:"weather-icon-svg/thunderstorms-rain",232:"weather-icon-svg/thunderstorms-rain",300:"weather-icon-svg/drizzle",301:"weather-icon-svg/drizzle",302:"weather-icon-svg/drizzle",310:"weather-icon-svg/drizzle",311:"weather-icon-svg/drizzle",312:"weather-icon-svg/drizzle",313:"weather-icon-svg/drizzle",314:"weather-icon-svg/drizzle",321:"weather-icon-svg/drizzle",500:"weather-icon-svg/rain",501:"weather-icon-svg/rain",502:"weather-icon-svg/rain",503:"weather-icon-svg/rain",504:"weather-icon-svg/extreme-rain",511:"weather-icon-svg/hail",520:"weather-icon-svg/drizzle",521:"weather-icon-svg/drizzle",522:"weather-icon-svg/drizzle",531:"weather-icon-svg/drizzle",600:"weather-icon-svg/snow",601:"weather-icon-svg/snow",602:"weather-icon-svg/extreme-snow",611:"weather-icon-svg/sleet",612:"weather-icon-svg/sleet",613:"weather-icon-svg/sleet",615:"weather-icon-svg/sleet",616:"weather-icon-svg/sleet",620:"weather-icon-svg/snow",621:"weather-icon-svg/snow",622:"weather-icon-svg/snow",701:"weather-icon-svg/fog",711:"weather-icon-svg/fog",721:"weather-icon-svg/fog",731:"weather-icon-svg/dust-wind",741:"weather-icon-svg/fog",751:"weather-icon-svg/dust",761:"weather-icon-svg/dust",762:"weather-icon-svg/smoke",771:"weather-icon-svg/wind",781:"weather-icon-svg/tornado",800:"weather-icon-svg/clear",801:"weather-icon-svg/cloudy",802:"weather-icon-svg/cloudy",803:"weather-icon-svg/overcast",804:"weather-icon-svg/overcast"},d="089a72c2411679202db6319748a373bf",h=document.querySelector(".input-block"),g=h.querySelector(".input-block__input"),u=h.querySelector(".input-block__text"),v=h.querySelector(".input-block__button"),w=document.querySelector(".container"),p=document.querySelector(".top__arrow"),m=document.querySelector(".top__title");let _;const f="https://api.openweathermap.org/data/2.5/weather";function S(e){const t=e.weather[0].icon[2];_="n"===t}function M(){u.innerHTML='<i class="fa fa-spin fa-refresh" aria-hidden="true"></i> Получение информации о погоде',u.classList.remove("input-block__text_error"),u.classList.add("input-block__text_pending")}function y(){u.classList.remove("input-block__text_pending"),u.classList.add("input-block__text_error"),u.textContent="Разрешите определять геоданные"}function C(e){const{latitude:t,longitude:n}=e.coords;a({url:f,params:{lat:t,lon:n,units:"metric",lang:"ru",appid:d},onSuccess:e=>{S(e),L(e)},onError:()=>{}})}function L(e){m.textContent="Выбрать другой город",p.style.display="block",h.classList.add("hide"),u.classList.remove("input-block__text_pending"),w.appendChild(s((e=>({tag:"section",cls:"weather-info",content:[{tag:"div",cls:"weather-wrapper",content:[{tag:"div",cls:"pic-deg",content:[{tag:"div",cls:"weather-picture",content:[{tag:"img",cls:"weather-picture__img",attrs:{src:l[e.weather[0].id],"aria-hidden":!0}}]},{tag:"div",cls:"weather-info__real-temp",content:[{tag:"h3",content:[Math.ceil(e.main.temp),{tag:"span",content:"°C"}]}]}]}]},{tag:"div",cls:"location",content:[{tag:"div",cls:"location__weather-condition",content:[{tag:"h2",content:e.weather[0].description}]},{tag:"div",cls:"location-city",content:[{tag:"h2",cls:"location__icon__title",content:[{tag:"i",cls:["location-city__icon","fa","fa-map-marker"],attrs:{"aria-hidden":!0}},`${e.name}, ${c[e.sys.country]}`]}]}]},{tag:"div",cls:"weather-info__details",content:[{tag:"div",cls:"feels-like",content:[{tag:"i",cls:["weather-info__icon","feels-like__thermometer","fa","fa-thermometer-three-quarters"],attrs:{"aria-hidden":!0}},{tag:"div",cls:"feels-like__temp",content:`Ощущается как ${Math.ceil(e.main.feels_like)}°C`}]},{tag:"div",cls:"humidity",content:[{tag:"i",cls:["weather-info__icon","humidity__icon","fa","fa-tint"],attrs:{"aria-hidden":!0}},{tag:"div",cls:"humidity__info",content:`Влажность ${e.main.humidity}%`}]}]}]}))(e)))}g.addEventListener("keyup",(e=>{var t;"Enter"===e.key&&g.value&&(t=g.value,M(),a({url:f,params:{q:t,units:"metric",lang:"ru",appid:d},onSuccess:e=>{S(e),L(e)},onError:e=>{u.textContent=e,u.classList.remove("input-block__text_pending"),u.classList.add("input-block__text_error")}}))})),p.addEventListener("click",(()=>{const e=document.querySelector(".weather-info");w.removeChild(e),m.textContent="Погода",p.style.display="none",h.classList.remove("hide"),g.value="",g.focus()})),v.addEventListener("click",(()=>{navigator.geolocation?(M(),navigator.geolocation.getCurrentPosition(C,y)):alert("Ваш браузер не поддерживает API геолокацию")}))})();